from news.models import*

user_1 = User.objects.create_user('ClarkKent')
user_2 = User.objects.create_user('LoisLane')

author_1 = Author.objects.create(user=user_1)
author_2 = Author.objects.create(user=user_2)

category_1 = Category.objects.create(name='Экономика')
category_2 = Category.objects.create(name='Спорт')
category_3 = Category.objects.create(name='IT')
category_4 = Category.objects.create(name='Происшествия')

post_1 = Post.objects.create(title='Цифровой рубль. Что это такое и зачем он нужен?', text='Полноценный выпуск цифрового рубля становится все ближе. Новая форма национальной валюты перестает быть темой для дискуссий в качестве технологии будущего, а реальной перспективой ближайших лет. Поэтому давайте разберемся, что из себя представляет цифровой рубль.', type='AR', author=author_1)
post_2 = Post.objects.create(title='Почему все «прутся» в IT', text='Кого только не найдешь в IT: инженеров КИПиА, электротехников, начальников службы охраны, химиков, бухгалтеров, экономистов, металлургов, юристов, медбратьев, руководителей отдела рекламы. И не только молодых, но и даже после 50. Почему? Потому что нигде перспектив нет: можно работать за МРОТ на гос или квазигоскомпании как половина страны, за модальную в 23 000 на ООО «Вектор», а можно пройти курсы и через полгода устроиться стажером за зарплату, которая все равно будет выше, чем твоя после 10 лет стажа на «нормальной работе».', type='AR', author=author_2)
post_3 = Post.objects.create(title='Дзюба показал опухший глаз после рассечения брови в матче с «Пари НН»', text='Нападающий «Локомотива» Артем Дзюба в своих соцсетях показал опухший глаз после рассечения брови в матче с «Пари НН» (1:0). «Все нормально, не переживайте, небольшое повреждение, но шрамы украшают мужчину. Всем прекрасного настроения!» — сказал футболист. Во время матча 10-го тура РПЛ Дзюба получил небольшое повреждение на 75-й минуте и медикам пришлось заклеить рану на лице.', type='NE', author=author_1)

post_1.category.add(category_1)
post_1.category.add(category_3)
post_2.category.add(category_3)
post_3.category.add(category_2)
post_3.category.add(category_4)

comment_1 = Comment.objects.create(text='А какой в нем смысл для обычных граждан, а не государства? Просто переводы без комиссии будут и все?', post=post_1, user=user_2)
comment_2 = Comment.objects.create(text='Как он будет отображаться в приложении банка? Как счет?', post=post_1, user=user_2)
comment_3 = Comment.objects.create(text='Если бы все перлись, вакансий бы не было.', post=post_2, user=user_1)
comment_4 = Comment.objects.create(text='It это как Москва среди остальных российских городов. Но всех в it не впихнешь. Надо сделать так, чтобы везде были достойные зарплаты.', post=post_2, user=user_1)
comment_5 = Comment.objects.create(text='Все прутся в IT, потому что за этим будущее.', post=post_2, user=user_2)
comment_6 = Comment.objects.create(text='Отмечу, что Артём стойко перенёс полученную травму и смог доиграть матч до конца, за что ему респект!', post=post_3, user=user_1)

post_1.dislike()
post_2.like()
post_2.like()
post_3.like()

comment_1.dislike()
comment_1.dislike()
comment_3.dislike()
comment_4.like()
comment_4.like()
comment_5.like()
comment_5.like()
comment_6.like()

author_1.update_rating()
author_2.update_rating()

Author.objects.all().order_by('-rating').values('user__username', 'rating')[0]

best_post = Post.objects.order_by('-rating')[0]
best_post.title
best_post.author.user.username
best_post.date_joined.strftime('%d.%m.%Y, %H:%M')
best_post.preview()
best_post.rating

Comment.objects.filter(post=best_post).values('user__username', 'date_joined', 'rating', 'text')